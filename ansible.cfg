# https://docs.ansible.com/projects/ansible/latest/reference_appendices/config.html
[defaults]
# Paths
collections_path = ./collections
inventory   = ./hosts
plugin_path = ./plugins
roles_path  = ./roles

# Quiet interpreter discovery (good for mixed Ubuntu/Debian estates)
interpreter_python = auto_silent

# Avoid *.retry files
retry_files_enabled = False

# Parallelism (tune as needed)
forks = 10

# Human-friendly output (optional; remove if you prefer default)
result_format = yaml
bin_ansible_callbacks = True

# Warn if a collection claims mismatch with your ansible-core version
collections_on_ansible_version_mismatch = warning

# SSH/task timeouts
timeout = 30

# Facts: "smart" + local caching speeds repeated runs
gathering = smart
fact_caching = jsonfile
fact_caching_connection = ./.ansible/facts
fact_caching_timeout = 86400

# Security default: keep host key checking enabled
host_key_checking = True

# Vault password file (optional - comment out if using --ask-vault-pass)
# vault_password_file = ./.vault-pass

# Display settings
display_skipped_hosts = False
display_args_to_stdout = False

# Callback plugins for better output (add if needed)
# callbacks_enabled = timer, profile_tasks, profile_roles

# Prevent tasks from running if any host has failed (safer default)
any_errors_fatal = False

# Diff output for changed files
# always_diff = False

# Strategy plugin (default is 'linear', 'free' for faster unordered execution)
strategy = linear

# Optional: Set a default remote user (comment out to use current user)
# remote_user = ansible

# Optional: Default connection type
# connection = smart

# Optional: ansible-lint compatibility
# force_handlers = False

# Optional niceties
# nocows = 1
# deprecation_warnings = False

[privilege_escalation]
become = False
become_method = sudo
become_ask_pass = False

# Optional: Set default become user
# become_user = root

[ssh_connection]
# Faster repeated runs via ControlMaster
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s

# Optional speed boost; can break with some sudo configs
# pipelining = True

# Control path for SSH multiplexing (avoid "path too long" errors)
control_path = %(directory)s/%%C

# SSH timeout (separate from ansible timeout)
# ssh_transfer_method = smart

# Retry SSH connections (useful for unreliable networks)
retries = 3

[diff]
# Always show diffs (helpful for debugging)
# always = True

# Context lines in diff output
context = 3

[inventory]
# Ignore certain patterns in inventory directory
# ignore_patterns = *.bak, *.ini~, .git

# Enable inventory plugins
enable_plugins = host_list, script, auto, yaml, ini, toml

# Unparsed inventory source warnings
# unparsed_is_failed = False

[persistent_connection]
# Connection timeout for network devices (if using network modules)
# connect_timeout = 30
# command_timeout = 30

[colors]
# Customize output colors (optional)
# highlight = white
# verbose = blue
# warn = bright purple
# error = red
# debug = dark gray
# deprecate = purple
# skip = cyan
# unreachable = red
# ok = green
# changed = yellow
# diff_add = green
# diff_remove = red
# diff_lines = cyan

# vim: ft=cfg ts=4 sts=2 sw=2 nosr et
